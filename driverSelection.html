<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">

        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    </head>
    <body>

    <div id="header-bar"><img  src="img/sap-logo.png" /> </div>

<div id="content-wrapper">
      <div id="content-box">
          <div id="driver-selection" class="carousel slide" data-ride="carousel">
              <!-- Indicators -->
              <ol class="carousel-indicators">
                  <li data-target="#driver-selection" data-slide-to="0" class="active"></li>
                  <li data-target="#driver-selection" data-slide-to="1"></li>
                  <li data-target="#driver-selection" data-slide-to="2"></li>
                  <li data-target="#driver-selection" data-slide-to="3"></li>
                  <li data-target="#driver-selection" data-slide-to="4"></li>
              </ol>
              <div class="col-lg-1 col-lg-pull-3"id="player-profile">
                  <h4 class="text-center">Liz</h4>
                  <img class="img-responsive img-circle" src="./pictures/user1.png"></img>
                      <h5 class="text-center">League Standing</h5>
                      <h3 class="text-center">#3</h3>
                  </table>
              </div>
              <!-- Wrapper for slides -->
              <div class="carousel-inner" role="listbox">
                  <div class="item active">
                      <img src="./img/drivers/lewis-hamilton.jpg" alt="..." class="img-responsive center-block">
                      <div class="carousel-caption">
                          <h1>
                              Lewis Hamilton
                          </h1>
                      </div>
                  </div>
                  <div class="item">
                      <img src="./img/drivers/sebastian-vettel.jpg" alt="..." class="img-responsive center-block">
                      <div class="carousel-caption">
                          <h1>
                              Sebastian Vettel
                          </h1>
                      </div>
                  </div>
                  <div class="item">
                      <img src="./img/drivers/nico-rosberg.jpg" alt="..." class="img-responsive center-block">
                      <div class="carousel-caption">
                          <h1>
                              Nico Rosberg
                          </h1>
                      </div>
                  </div>
                  <div class="item">
                      <img src="./img/drivers/kimi-raikkonen.jpg" alt="..." class="img-responsive center-block">
                      <div class="carousel-caption">
                          <h1>
                              Kimi Raikkonen
                          </h1>
                      </div>
                  </div>
                  <div class="item">
                      <img src="./img/drivers/valtteri-bottas.jpg" alt="..." class="img-responsive center-block">
                      <div class="carousel-caption">
                          <h1>
                              Valtteri Bottas
                          </h1>
                      </div>
                  </div>

              </div>
              <div class="carousel-overlay">
                  <div id="driver-select-btn-container" class="col-lg-push-2 col-lg-8 center-block">
                      <button onclick="location.href='video.html'" type="button" class="btn-success btn-lg">
                          <!--TODO: link to video page -->
                          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                      </button>
                  </div>
                  <div id="helmet">
                  </div>
                  <div class="panel" id="player_stats">

                      <!-- Table -->
                      <table class="table">
                          <tbody>
                          <tr>
                              <th scope="row">1</th>
                              <td>Mark</td>
                          </tr>
                          <tr>
                              <th scope="row">2</th>
                              <td>Jacob</td>
                          </tr>
                          </tbody>
                      </table>

                  </div>
                  </div>
              </div>
              <!-- Controls -->
              <a class="left carousel-control" href="#driver-selection" role="button" data-slide="prev">
                  <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#driver-selection" role="button" data-slide="next">
                  <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
              </a>

          </div>

      </div>
</div>



    </div> <!-- /container -->        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/main.js"></script>
        <script src="js/playerStats.js" type="text/javascript"></script>
        <script type="text/javascript">
            $("#driver-selection").parent().find(".carousel-control").css("z-index", 2);
            $(".carousel-overlay").hover(function(){
                $(this).addClass("carousel-overlay-active");
                $("#player-profile").addClass("player-profile-inactive");
            }, function(){
                $(this).removeClass("carousel-overlay-active");
            });
            $(".carousel-control").hover(function(){
                $(".carousel-overlay").removeClass("carousel-overlay-active");
                $("#player-profile").removeClass("player-profile-inactive");
            })
        </script>
        <script>
            $(document).ready(function(){
                var $driverCarousel = $('#driver-selection');
                $driverCarousel.carousel();
                var renderPlayerStats = function renderPlayerStats(event){
                    var item = $(".item.active");
                    var $statsTable = $(" #player_stats table");
                    $statsTable.html("");
                    var caption;
                    if (!event) {
                        caption = this.querySelector(".item.active > .carousel-caption");
                    } else {
                        caption = event.relatedTarget.querySelector(".carousel-caption");
                    }
                    if (caption) {
                        var name = caption.textContent.trim();
                        var stats = playerStats[name];
                        var $helmet = $("#helmet");
                        $helmet.html("");
                        $helmet.append("<h1>"+name+"</h1>");
                        if (stats){
                            $helmet.append("<h3> #"+stats["number"]+"</h3>");
                        }
                        $helmet.append(
                            $("<img>").attr("src", "./img/helmets/"+ name.toLocaleLowerCase().trim().split(" ").join("-") + "-helmet.png")
                        );

                        var row;
                        var attrs = [
                            "Team",
                            "Country",
                            "Podiums",
                            "Grands Prix entered",
                            "World Championships",
                            "Highest race finish",
                            "Highest grid position",
                            "Date of birth",
                            "Place of birth"
                        ];
                        if (stats){
                            row  = "<tr><th scope='row'>"+"Name"+"</th>"+"<td>"+name+"</td>"+"</tr>"
                            $statsTable.append(row);
                            attrs.forEach(function(attr){
                                if (stats[attr]){
                                    row  = "<tr><th scope='row'>"+attr+"</th>"+"<td>"+stats[attr]+"</td>"+"</tr>"
                                    $statsTable.append(row);
                                }

                            })

                        } else {
                            console.error("expected to find player stats for " + name);
                        }
                    } else {
                        console.error("expected to find active player caption");
                    }
                };
                renderPlayerStats.apply($driverCarousel[0]);
                $driverCarousel .on('slide.bs.carousel', function() {
                    renderPlayerStats.apply(this, arguments);
                })
            });
        </script>
    </body>
</html>
